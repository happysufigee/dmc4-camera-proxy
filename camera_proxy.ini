[CameraProxy]
; Experimental D3D9 camera proxy configuration for RTX Remix.
;
; This branch targets general Direct3D9 titles by caching matrix-like constant uploads
; and emitting fixed-function WORLD / VIEW / PROJECTION state immediately before draw calls.
;
; Combined MVP fallback decomposition is optional and disabled by default.
; When enabled, normal World/View/Projection detection still has priority.

; =============================================================================
; MATRIX REGISTER OVERRIDES
; =============================================================================
; Register overrides are optional and deterministic:
;   - value >= 0 : only that register base is accepted for that matrix type
;   - value  = -1 : classify from all uploaded constant ranges
;
; Typical D3D9 layouts (engine-specific, not guaranteed):
;   c0-c3   World or MVP
;   c4-c7   View
;   c8-c11  Projection

ViewMatrixRegister=-1
ProjMatrixRegister=-1
WorldMatrixRegister=-1

; Optional game-specific profile.
; Empty/None: use structural auto-detection + register overrides.
; MetalGearRising: use fixed mapping first:
;   Projection   c4-c7
;   ViewProjection c8-c11 (proxy derives View by inverse(Projection) * ViewProjection)
;   World        c16-c19
; Optional tracked matrix:
;   WorldView      c20-c23
; DevilMayCry4 / DMC4: strict fixed mapping with no fallback:
;   Combined MVP c0-c3
;   World        c0-c3
;   View         c4-c7
;   Projection   c8-c11
; Barnyard / Barnyard2006:
;   - blocks app SetTransform(View/Projection)
;   - forwards WORLD only (detected from vertex shader constants)
;   - optional force mode can always treat c0-c3 as WORLD
GameProfile=

; Barnyard profile only: 1 = always use c0-c3 as WORLD when uploaded
BarnyardForceWorldFromC0=0
; Barnyard profile only: 1 = intercept game SetTransform(View/Projection),
; round-trip via GetTransform(), cache and forward at draw time
BarnyardUseGameSetTransformsForViewProjection=1

; =============================================================================
; RUNTIME CHAINING / OUTPUT
; =============================================================================
; 1 = chain to Remix runtime DLL (RemixDllName)
; 0 = chain to system d3d9.dll
UseRemixRuntime=1
RemixDllName=d3d9_remix.dll

; 1 = emit SetTransform(WORLD/VIEW/PROJECTION) immediately before every draw call
; 0 = disable fixed-function transform forwarding
EmitFixedFunctionTransforms=1

; Combined MVP fallback controls (used only when full W/V/P was not resolved).
EnableCombinedMVP=0
CombinedMVPRequireWorld=0
CombinedMVPAssumeIdentityWorld=1
CombinedMVPForceDecomposition=0
CombinedMVPLogDecomposition=0

; =============================================================================
; IMGUI / OVERLAY
; =============================================================================
; UI scaling percentage for the in-game ImGui overlay (50..300).
; Can also be adjusted at runtime in the overlay.
ImGuiScalePercent=100

; Single-key hotkeys (Win32 virtual-key codes) that work even when the ImGui menu is hidden.
; Defaults: F10 toggle menu, F9 pause rendering, F8 emit cached matrices, F7 clear register overrides.
HotkeyToggleMenuVK=121
HotkeyTogglePauseVK=120
HotkeyEmitMatricesVK=119
HotkeyResetMatrixOverridesVK=118


; =============================================================================
; EXPERIMENTAL CUSTOM PROJECTION FALLBACK
; =============================================================================
; This feature is OFF by default and should only be enabled for testing.
; It can provide a projection matrix when no usable projection was found in shader constants.
; By default it does NOT override register-detected W/V/P or combined MVP-derived projection.
ExperimentalCustomProjectionEnabled=0

; 1 = use the manual 4x4 matrix values below
; 2 = auto-generate from display resolution/aspect + FOV/near/far settings
ExperimentalCustomProjectionMode=2

; Set to 1 only if you explicitly want to override projection even when one was detected.
ExperimentalCustomProjectionOverrideDetectedProjection=0

; Set to 1 only if you explicitly want to override projection while MVP-only camera data exists.
ExperimentalCustomProjectionOverrideCombinedMVP=0

; Metal Gear Rising profile only:
; If c4-c7 does not look like a normal perspective projection, proxy still uses c4 by default.
; Set this to 1 to prefer auto-generating projection from c8-c11 ViewProjection in that case.
MGRRUseAutoProjectionWhenC4Invalid=0

; Auto-generation parameters
ExperimentalCustomProjectionAutoFovDeg=60.0
ExperimentalCustomProjectionAutoNearZ=0.1
ExperimentalCustomProjectionAutoFarZ=1000.0
ExperimentalCustomProjectionAutoAspectFallback=1.7777778
; 1 = LH, 2 = RH
ExperimentalCustomProjectionAutoHandedness=1

; Manual 4x4 projection matrix (editable in ImGui when ExperimentalCustomProjectionEnabled=1 and mode=1)
ExperimentalCustomProjectionM11=0.9742786
ExperimentalCustomProjectionM12=0
ExperimentalCustomProjectionM13=0
ExperimentalCustomProjectionM14=0
ExperimentalCustomProjectionM21=0
ExperimentalCustomProjectionM22=1.732051
ExperimentalCustomProjectionM23=0
ExperimentalCustomProjectionM24=0
ExperimentalCustomProjectionM31=0
ExperimentalCustomProjectionM32=0
ExperimentalCustomProjectionM33=1.0001
ExperimentalCustomProjectionM34=1
ExperimentalCustomProjectionM41=0
ExperimentalCustomProjectionM42=0
ExperimentalCustomProjectionM43=-0.10001
ExperimentalCustomProjectionM44=0

; =============================================================================
; LOGGING
; =============================================================================
EnableLogging=1
LogAllConstants=0

; =============================================================================
; PROJECTION VALIDATION
; =============================================================================
; Field-of-view limits in radians used for strict projection classification.
MinFOV=0.1
MaxFOV=2.5

; =============================================================================
; DETERMINISTIC CLASSIFICATION TOGGLES
; =============================================================================
; Enables structural classification path across constant uploads.
AutoDetectMatrices=1

; Probe a transposed version of a candidate matrix once if direct form fails.
ProbeTransposedLayouts=1

; Probe inverse-view candidates for deterministic view classification.
ProbeInverseView=1

; =============================================================================
; SHADER CONSTANT OVERRIDE EDITOR
; =============================================================================
; Override scope for manual constant edits in the overlay.
; 0 = sticky, 1 = one frame, 2 = N frames.
OverrideScopeMode=0
OverrideNFrames=3

; =============================================================================
; MEMORY SCANNER
; =============================================================================
EnableMemoryScanner=0
MemoryScannerIntervalSec=0
MemoryScannerMaxResults=25
MemoryScannerModule=
