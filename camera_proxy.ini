[CameraProxy]
; DMC4 Camera Proxy Configuration for RTX Remix
;
; This proxy intercepts SetVertexShaderConstantF calls and extracts
; camera matrices (View/Projection) from shader constants, then provides
; them to RTX Remix via SetTransform() calls.

; =============================================================================
; MATRIX REGISTER CONFIGURATION
; =============================================================================
; These values specify which vertex shader constant registers contain
; the camera matrices. A 4x4 matrix uses 4 consecutive vec4 registers.
; Set to -1 to disable detection for that matrix type.
;
; Common register layouts in game engines:
;   c0-c3:   World/Model matrix (object transform)
;   c4-c7:   View matrix (camera orientation/position)
;   c8-c11:  Projection matrix (perspective/FOV)
;   c0-c3:   Combined WorldViewProjection (some engines)

ViewMatrixRegister=4
ProjMatrixRegister=8
WorldMatrixRegister=0

; =============================================================================
; RUNTIME CHAINING / OUTPUT OPTIONS
; =============================================================================
; When enabled, the proxy loads Remix's D3D9 runtime instead of Windows system d3d9.
UseRemixRuntime=1

; Name/path of the Remix runtime DLL to chain-load (relative or absolute path).
RemixDllName=d3d9_remix.dll

; Emit SetTransform(WORLD/VIEW/PROJECTION) calls after matrix extraction.
; Disable this if you only want matrix logging and no fixed-function transform output.
EmitFixedFunctionTransforms=1

; =============================================================================
; LOGGING OPTIONS
; =============================================================================
; Enable logging to camera_proxy.log (1=enabled, 0=disabled)
EnableLogging=1

; =============================================================================
; FOV VALIDATION
; =============================================================================
; Valid FOV range in radians. Matrices with FOV outside this range
; are rejected as non-projection matrices.
; Typical game FOV: 0.8-1.5 radians (45-85 degrees)
MinFOV=0.1
MaxFOV=2.5

; =============================================================================
; EXPERIMENTAL / DIAGNOSTIC OPTIONS
; =============================================================================
; Auto-detect mode: Scan ALL shader constant updates for matrices that
; look like View or Projection matrices, regardless of register number.
; Useful for initial setup when you don't know the register layout.
; WARNING: May cause issues if it picks up the wrong matrices!
AutoDetectMatrices=0

; Log all shader constant updates (VERY VERBOSE!)
; Use this to manually analyze which registers contain camera matrices.
; The log will show register ranges and their values every 60 frames.
LogAllConstants=0

; =============================================================================
; MATRIX DETECTION HEURISTICS
; =============================================================================
; Require the same candidate for N frames before logging it as stable.
StabilityFrames=5

; Variance threshold (in milli-units) for considering a register stable.
; Example: 3 = 0.003
VarianceThresholdMilli=3

; Log a short summary of the top candidate registers every 300 frames.
LogCandidateSummary=1

; How many candidates to log per matrix type.
TopCandidateCount=5

; =============================================================================
; MEMORY SCANNER (EXPERIMENTAL)
; =============================================================================
; Enable an optional memory scan for matrices in the target module.
EnableMemoryScanner=0

; Scan interval in seconds (0 = manual only).
MemoryScannerIntervalSec=0

; Max results to log per scan.
MemoryScannerMaxResults=25

; Optional module name to scan (blank = main executable).
MemoryScannerModule=


; =============================================================================
; ADVANCED HEURISTICS / OVERRIDE SCOPES
; =============================================================================
; Layout strategy mode: 0=Auto, 1=4x4, 2=4x3, 3=VP, 4=MVP
LayoutStrategyMode=0

; Probe transposed matrix conventions (row-major vs column-major)
ProbeTransposedLayouts=1

; Probe inverse-view interpretation for view candidates
ProbeInverseView=1

; Auto-pick highest-confidence view/proj candidates in Heuristics tab
AutoPickCandidates=1

; Override scope mode: 0=Sticky, 1=One-frame, 2=N-frames
OverrideScopeMode=0

; Number of frames when OverrideScopeMode=2
OverrideNFrames=3

; Auto detect ranking mode: 0=Individual W/V/P, 1=Combined MVP
AutoDetectMode=0

; Temporal stability filter for auto detect candidates
AutoDetectMinFramesSeen=12
AutoDetectMinConsecutiveFrames=4

; Bounded sampling window for auto-detect scoring
AutoDetectSamplingFrames=180

; Automatically apply highest-scoring stable candidates when sampling is complete
AutoApplyDetectedMatrices=1
